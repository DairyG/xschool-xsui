<div class="layui-row select_content">
	<div class="layui-col-md6 margin-t-20">
		<div class="bgwhite padding-10 padding-t-0" >
			<div class="layui-form search_box">
				<input type="text" class="layui-input" placeholder="用户名称"/>
				<i class="layui-icon layui-icon-search"></i>
			</div>
			<div class="loaction_box">
				<a href="javascript:;" onclick="show_items(0,'company')">四季香江</a> 
				<!-- &gt; <a href="javascript:;">子公司</a> 
				&gt; <a href="javascript:;">子部门</a> -->
			</div>
			<div class="select_box">
				<p class="padding-l-10" style="padding-bottom: 5px;"><input type="checkbox" onclick="checkAll(this)" />全选</p>
				<ul>
					<li><input type="checkbox" onclick="selected(this)" data-id="1" data-text="建筑公司" data-type="company"/><i class="icon-file-group"></i>建筑公司</li>
					<li><input type="checkbox" onclick="selected(this)" data-id="2" data-text="咨询公司" data-type="company" /><i class="icon-file-group"></i>咨询公司</li>
					<li><input type="checkbox" onclick="selected(this)" data-id="3" data-text="财务公司" data-type="company" /><i class="icon-file-group"></i>财务公司</li>
					<li><input type="checkbox" onclick="selected(this)" data-id="4" data-text="张三"  data-type="user" />张三</li>
					<li><input type="checkbox" onclick="selected(this)" data-id="5" data-text="李四" data-type="user"/>李四</li>
					<li><input type="checkbox" onclick="selected(this)" data-id="6" data-text="王五" data-type="user"data-type="user"/>王五</li>
					<li><input type="checkbox" onclick="selected(this)" data-id="7" data-text="赵六" data-type="user"/>赵六</li>
					<li><input type="checkbox" onclick="selected(this)" data-id="8" data-text="张三" data-type="user"/>张三</li>
					<li><input type="checkbox" onclick="selected(this)" data-id="9" data-text="李四" data-type="user" />李四</li>
					<li><input type="checkbox" onclick="selected(this)" data-id="10" data-text="王五" data-type="user" />王五</li>
					<li><input type="checkbox" onclick="selected(this)" data-id="11" data-text="赵六" data-type="user" />赵六</li>
				</ul>
			</div>
		</div>
	</div>
	<div class="layui-col-md6 border-l-1 margin-t-20">
		<div class="bgwhite padding-10">
			<ul class="selected_box" id="selected_box">
				
			</ul>
		</div>
	</div>
</div>
<script type="text/javascript">
	var has_user = GetPara('has_user');
	var has_department = GetPara('has_department');
	var hsa_company = GetPara('hsa_company');
	var allow_num = GetPara('num');
	
	function checkAll(all_obj){
		var checked = $(all_obj).prop('checked');
		$(".select_box ul li").each(function(i,obj){
			var input = $(obj).find('input[type="checkbox"]');
			var value = $(input).data('id');
			var type = $(input).data('type');
			if(checked){
				var text = $(input).data('text');
				var html = build_selectd_html(type,value,text);
				$("#selected_box").append(html);
			} else {
				user_sel_remove(type,value);
			}
			$(input).prop('checked',checked);
		});
	}
	
	function selected(obj){
		var checked = $(obj).prop('checked');
		var value = $(obj).data('id');
		var type = $(obj).data('type');
		if(checked){
			var text = $(obj).data('text');
			var html = build_selectd_html(type,value,text);
			$("#selected_box").append(html);
		} else {
			user_sel_remove(type,value);
		}
	}
	
	function user_sel_remove(type,id){
		var class_name = type+'_'+id;
		$("#selected_box").find("."+class_name).remove();
		$(".select_box ul li input[data-type='"+type+"'][data-id='"+id+"']").prop('checked',false);
	}
	
	function build_selectd_html(type,value,text){
		var class_name = type+'_'+value;
		if($("#selected_box").find("."+class_name).length == 0){
			var html = '<li class="'+type+'_'+value+' " >'+text+'<i class="layui-icon layui-icon-close-fill fr" onclick="user_sel_remove(\''+type+'\','+value+')"></i></li>'
			return html;
		} 
		return "";
	}
	
	/**
	 * 
	 * @param int pid 上级id
	 * @param string p_type （公司 company, 部门 department）
	 */
	function show_items(pid,p_type){
		if(p_type == 'company'){
			
		}
	}
</script>